#!/usr/bin/env tclkit

cd ../js

file delete -force ../es5/*

set presets "/usr/local/lib/node_modules/babel-preset-latest"

##############################################
##### ONE ITEM OR ALL
##############################################
if {$item != ""} {
    puts "\tprocessing: $item..."
    exec babel $item.js --out-dir ../es5 --presets=$presets
} else {
    set files [lsort [glob -nocomplain *.js]]

    set cnt 0
    puts "babel started:"
    foreach i $files {
	incr cnt
	set jsfile [file tail $i]
	
	puts "\t$cnt - processing $jsfile"

	exec babel $i --out-dir ../es5 --presets=$presets
    }
}

puts "\n\tcombine es5 files now into $root.es5...\n"

cd /Melify/mtk/dev/tk/lib/components/$root/es5
eval exec cat [lsort [glob ../es5/*.js]] > ../dist/wc.es5.js

#RETURN 
cd /Melify/mtk/dev/tk/lib/components/$root/bin
